# ===================================================================
# LocallyTrip Production Environment Configuration
# Ubuntu Server Deployment - /home/locallytrip/locallytrip/.env
# ===================================================================

# ===== APPLICATION ENVIRONMENT =====
NODE_ENV=production

# ===== DOMAIN CONFIGURATION =====
# Replace 'your-domain.com' with your actual domain
DOMAIN=your-domain.com
NEXT_PUBLIC_WEBSITE_URL=https://your-domain.com
NEXT_PUBLIC_API_URL=https://api.your-domain.com
NEXT_PUBLIC_ADMIN_URL=https://admin.your-domain.com
NEXT_PUBLIC_IMAGES=https://api.your-domain.com/images

# ===== DATABASE CONFIGURATION =====
DB_HOST=postgres
DB_PORT=5432
DB_NAME=locallytrip_prod
DB_USER=locallytrip_prod_user
# CRITICAL: Change this to a secure password
DB_PASSWORD=your-super-secure-database-password-here

# ===== JWT AUTHENTICATION =====
# CRITICAL: Generate secure JWT secret (minimum 32 characters)
# Command: openssl rand -base64 64
JWT_SECRET=your-super-secure-jwt-secret-key-minimum-32-characters
JWT_EXPIRES_IN=7d

# ===== EMAIL CONFIGURATION =====
# Configure SMTP for sending emails (registration, password reset, etc.)
EMAIL_SERVICE=gmail
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your-app-password
EMAIL_FROM=noreply@your-domain.com

# ===== SSL CONFIGURATION =====
# Email for Let's Encrypt SSL certificate
SSL_EMAIL=admin@your-domain.com
# Options: letsencrypt, selfsigned
SSL_MODE=letsencrypt

# ===== POSTGRES CONFIGURATION =====
POSTGRES_PORT=5432

# ===== SERVER CONFIGURATION =====
# Internal server ports (usually don't need to change)
BACKEND_PORT=3001
WEB_PORT=3000
ADMIN_PORT=3002

# ===== SECURITY CONFIGURATION =====
# Session secret for web authentication
SESSION_SECRET=your-session-secret-key-here

# CORS origins (adjust for your domains)
CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com,https://admin.your-domain.com

# ===== FILE UPLOAD CONFIGURATION =====
# Maximum file size for uploads (in bytes)
MAX_FILE_SIZE=10485760
# Upload directory
UPLOAD_DIR=/app/public/uploads

# ===== RATE LIMITING =====
# API rate limiting (requests per minute)
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# ===== LOGGING CONFIGURATION =====
LOG_LEVEL=info
LOG_FILE=/app/logs/app.log

# ===== BACKUP CONFIGURATION =====
BACKUP_RETENTION_DAYS=30

# ===== MONITORING CONFIGURATION =====
HEALTH_CHECK_INTERVAL=30000

# ===================================================================
# UBUNTU SERVER SPECIFIC SETTINGS
# ===================================================================

# ===== SERVER PATHS =====
PROJECT_PATH=/home/locallytrip
BACKUP_PATH=/home/locallytrip/backups
LOG_PATH=/home/locallytrip/logs

# ===== SYSTEM CONFIGURATION =====
TZ=Asia/Jakarta
LANG=en_US.UTF-8

# ===================================================================
# INSTRUCTIONS FOR CONFIGURATION
# ===================================================================

# 1. DOMAIN SETUP:
#    - Replace 'your-domain.com' with your actual domain
#    - Ensure DNS records point to your Ubuntu server IP:
#      your-domain.com        → Server IP
#      www.your-domain.com    → Server IP  
#      api.your-domain.com    → Server IP
#      admin.your-domain.com  → Server IP

# 2. DATABASE PASSWORD:
#    - Generate secure password: openssl rand -base64 32
#    - Replace 'your-super-secure-database-password-here'

# 3. JWT SECRET:
#    - Generate secure secret: openssl rand -base64 64
#    - Replace 'your-super-secure-jwt-secret-key-minimum-32-characters'

# 4. EMAIL CONFIGURATION:
#    - For Gmail: Use App Password (not regular password)
#    - Enable 2FA and generate App Password in Google Account settings
#    - Replace 'your-email@gmail.com' and 'your-app-password'

# 5. SSL CERTIFICATE:
#    - For Let's Encrypt: Set SSL_MODE=letsencrypt
#    - Replace 'admin@your-domain.com' with valid email
#    - For testing: Set SSL_MODE=selfsigned

# 6. SESSION SECRET:
#    - Generate: openssl rand -base64 32
#    - Replace 'your-session-secret-key-here'

# ===================================================================
# SECURITY CHECKLIST
# ===================================================================

# [ ] Changed all default passwords
# [ ] Generated secure JWT secret (>32 chars)
# [ ] Configured proper domain names
# [ ] Set up email authentication
# [ ] Configured SSL certificate email
# [ ] Set appropriate CORS origins
# [ ] Reviewed rate limiting settings
# [ ] Set proper timezone
# [ ] Secured file upload limits

# ===================================================================
# COMMANDS TO GENERATE SECURE VALUES
# ===================================================================

# Database Password:
# openssl rand -base64 32

# JWT Secret:
# openssl rand -base64 64

# Session Secret:  
# openssl rand -base64 32

# Test Configuration:
# ./ubuntu-quick-commands.sh health
